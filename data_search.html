<head>
    <title>LG Air Data Virtualization</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.8.18/themes/base/jquery-ui.css" type="text/css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>

<div style="width: 100%; position: fixed; background:#ffffff;z-index:100; border-bottom: 5px solid black">
    <div style="margin-left: 30px;  font-size: 30px;">
        <img id="img_logo" src="./r&d_data.png"></img>
        R&D Data
    </div>
</div>
<div class="full-page">
    <div id="lg_sidebar">
        <div id="lg_sidebar_content">
            <a href="home.html">홈</a>
            <a href="data_search.html">데이터 검색</a>
            <a href="option.html">단위 옵션</a>
            <a href="admin.html">관리자 모드</a>
        </div>
    </div>
    <div id="lg_contents">
        <div id="lg_search_box">
            <form id="data_search" method="post" action="" onSubmit="dataSearch();return false;">
                <h6 class="lg_circle"> ID 입력
                    <h6>
                        <div id="lg_search_id">
                            <input id="id_search" name="header_uid" type="text">
                        </div>
                        <h6 class="lg_circle">데이터 검색(필수)</h6>
                        <div id="lg_search_necessary">
                            <div id="lg_search_necessary_items">
                                <div class="lg_search_necessary_item">
                                    <span class="lg_text">분류</span>
                                    <select onchange="lg_model_Change()" class="lg_select_model_filter"
                                            id="lgmv_model_filter1" name="lgmv_model_filter1">
                                        <option value="">- 선택 -</option>
                                        <option value="Multi V H/P">Multi V H/P</option>
                                        <option value="Multi V H/R">Multi V H/R</option>
                                        <option value="Multi V ARUM">Multi V ARUM</option>
                                        <option value="Multi Water">Multi Water</option>
                                        <option value="Multi V S">Multi V S</option>
                                        <option value="Multi V M">Multi V M</option>
                                        <option value="Multi V Space">Multi V Space</option>
                                        <option value="GHP">GHP</option>
                                        <option value="Chiller">Chiller</option>
                                        <option value="Therma V">Therma V</option>
                                        <option value="Single Package">Single Package</option>
                                        <option value="Single&Multi">Single&Multi</option>
                                        <option value="Refrigeration">Refrigeration</option>
                                    </select>
                                </div>
                                <div class="lg_search_necessary_item">
                                    <span class="lg_text">Model 군</span>
                                    <select class="lg_select_model_filter" id="lgmv_model_filter2"
                                            name="lgmv_model_filter2">
                                        <option value="">- 선택 -</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <h6 class="lg_circle">상세 검색</h6>
                        <div id="lg_search_detail">
                            <div id="lg_search_detail_1_items">
                                <div class="lg_search_detail_1_item">
                                    <span class="lg_text">날짜입력</span>
                                    <input type="text" id="testDatepicker1" class="lg_search_date_box">
                                    <span style="align-self: center;">~</span>
                                    <input type="text" id="testDatepicker2" class="lg_search_date_box">
                                </div>
                            </div>
                            <div id="lg_search_detail_2_items">
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">Model 명</span>
                                    <input class="detail_2_item_input" type="text" name="lgmv_model_name">
                                </div>
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">Serial 명</span>
                                    <input class="detail_2_item_input" type="text" name="lgmv_serial_number">
                                </div>
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">냉매</span>
                                    <input class="detail_2_item_input" type="text" name="lgmv_r">
                                </div>
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">main S/W</span>
                                    <input class="detail_2_item_input" type="text" name="lgmv_main_ver">
                                </div>
                            </div>
                            <div id="lg_search_detail_2_items">
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">EEPROM S/W</span>
                                    <input class="detail_2_item_input" type="text" name="lgmv_eep_ver">
                                </div>
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">용량</span>
                                    <input class="detail_2_item_input" type="text" name="calorimeter_cap">
                                </div>
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">전원</span>
                                    <input class="detail_2_item_input" type="text" name="calorimeter_power">
                                </div>
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">효율</span>
                                    <input class="detail_2_item_input" type="text" name="calorimeter_eer">
                                </div>
                            </div>
                            <div id="lg_search_detail_2_items">
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">전압</span>
                                    <input class="detail_2_item_input" type="text" name="calorimeter_power_vol">
                                </div>
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">ID 습구온도</span>
                                    <input class="detail_2_item_input" type="text" name="calorimeter_id_wb">
                                </div>
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">ID 건구온도</span>
                                    <input class="detail_2_item_input" type="text" name="calorimeter_id_db">
                                </div>
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">OD 습구온도</span>
                                    <input class="detail_2_item_input" type="text" name="calorimeter_od_wb">
                                </div>
                            </div>
                            <div id="lg_search_detail_2_items">
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">OD 건구온도</span>
                                    <input class="detail_2_item_input" type="text" name="calorimeter_od_db">
                                </div>
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">파일생성날짜</span>
                                    <input class="detail_2_item_input" type="text" name="conn_file_date">
                                </div>
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">IDU 샤시</span>
                                    <input class="detail_2_item_input" type="text" name="idu_chassis">
                                </div>
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">ODU 샤시</span>
                                    <input class="detail_2_item_input" type="text" name="odu_chassis">
                                </div>
                            </div>
                            <div id="lg_search_detail_2_items">
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">개발프로세스(상)</span>
                                    <input class="detail_2_item_input" type="text" name="plm_step1">
                                </div>
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">개발프로세스(하)</span>
                                    <input class="detail_2_item_input" type="text" name="plm_step2">
                                </div>
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">구분</span>
                                    <input class="detail_2_item_input" type="text" name="test_step1">
                                </div>
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">시험항목</span>
                                    <input class="detail_2_item_input" type="text" name="test_step2">
                                </div>
                            </div>
                            <div id="lg_search_detail_2_items">
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">실험자</span>
                                    <input class="detail_2_item_input" type="text" name="conn_tester">
                                </div>
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">챔버번호</span>
                                    <input class="detail_2_item_input" type="text" name="conn_testroom_number">
                                </div>
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">배관정보</span>
                                    <input class="detail_2_item_input" type="text" name="conn_pipe_type">
                                </div>
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">TEST 결과</span>
                                    <input class="detail_2_item_input" type="text" name="conn_test_result">
                                </div>
                            </div>
                            <div id="lg_search_detail_2_items">
                                <div class="lg_search_detail_2_item">
                                    <span class="lg_text">설명</span>
                                    <input class="detail_2_item_input" type="text" name="conn_memo">
                                </div>
                            </div>
                        </div>
            </form>
            <input class="data_search_btn" type="submit" value="검색" onclick="dataSearch();">
        </div>
        <div id="search_result">
            <!--검색 결과 부분-->
            <table id="search_result_table" class="table table-bordered">
                <tr>
                    <th>ID</th>
                    <th>Model</th>
                    <th>모델명</th>
                    <th>용량</th>
                    <th>샤시</th>
                    <th>냉매 종류</th>
                    <th>구분</th>
                    <th>시험항목</th>
                    <th>시험 날짜</th>
                    <th>실험자</th>
                    <th>챔버 번호</th>
                    <th>상세 보기</th>
                    <th>그래프</th>
                </tr>
                <tbody id="lg_search_result_tbody">
                </tbody>
            </table>

            <div id="lg_detail">
                <h6 class="lg_circle lg_product_info_text">제품정보</h6>
                <h6 class="lg_product_info_text" style="margin-top: 20px">제품정보</h6>
                <table class="table lg_search_detail_table">
                    <tbody>
                    <tr style="border-top: 2px solid rgb(163,163,163)">
                        <th>모델명</th>
                        <td id="_lgmv_model_name"></td>
                        <th>시리얼넘버</th>
                        <td id="_lgmv_serial_number"></td>
                    </tr>
                    <tr>
                        <th>제품군</th>
                        <td id="_lgmv_model_filter1"></td>
                        <th>제품명</th>
                        <td id="_lgmv_model_filter2"></td>
                    </tr>
                    <tr>
                        <th>Main S/W 버전</th>
                        <td id="_lgmv_r"></td>
                        <th>EEP ver</th>
                        <td id="_lgmv_main_ver"></td>
                    </tr>
                    <tr>
                        <th>냉매</th>
                        <td id="_lgmv_eep_ver"></td>
                        <th></th>
                        <td></td>
                    </tr>
                    </tbody>
                </table>
                <h6 class="lg_product_info_text">시험정보</h6>
                <table class="table lg_search_detail_table">
                    <tbody>
                    <tr style="border-top: 2px solid rgb(163,163,163)">
                        <th>개발프로세스(상)</th>
                        <td id="_plm_step1"></td>
                        <th>개발프로세스(하)</th>
                        <td id="_plm_step2"></td>
                    </tr>
                    <tr>
                        <th>시험항목(상)</th>
                        <td id="_test_step1"></td>
                        <th>시험항목(하)</th>
                        <td id="_test_step2"></td>
                    </tr>
                    <tr>
                        <th>챔버번호</th>
                        <td id="_conn_testroom_number"></td>
                        <th>실험자</th>
                        <td id="_conn_tester"></td>
                    </tr>
                    <tr>
                        <th>실내기 샤시</th>
                        <td id="_idu_chassis"></td>
                        <th> 실외기 샤시</th>
                        <td id="_odu_chassis"></td>
                    </tr>
                    <tr>
                        <th>능력</th>
                        <td id="_calorimeter_cap"></td>
                        <th>전력</th>
                        <td id="_calorimeter_power"></td>
                    </tr>
                    <tr>
                        <th>효율</th>
                        <td id="_calorimeter_eer"></td>
                        <th>전압</th>
                        <td id="_calorimeter_power_vol"></td>
                    </tr>
                    <tr>
                        <th>실외기 건구온도</th>
                        <td id="_calorimeter_od_db"></td>
                        <th>실내기 건구온도</th>
                        <td id="_calorimeter_id_db"></td>
                    </tr>
                    <tr>
                        <th>실외기 습구온도</th>
                        <td id="_calorimeter_od_wb"></td>
                        <th>실내기 습구온도
                        </th>
                        <td id="_calorimeter_id_wb"></td>
                    </tr>
                    <tr>
                        <th>운전률</th>
                        <td id="_conn_operation_rate"></td>
                        <th>배관 종류</th>
                        <td id="_conn_pipe_type"></td>
                    </tr>
                    <tr>
                        <th>메모</th>
                        <td id="_conn_memo"></td>
                        <th></th>
                        <td></td>
                    </tr>
                    </tbody>
                </table>
                <h6 class="lg_product_info_text">단위정보</h6>
                <table class="table lg_search_detail_table">
                    <tbody>
                    <tr style="border-top: 2px solid rgb(163,163,163)">
                        <th>온도 단위</th>
                        <td id="_lgmv_unit_temp"></td>
                        <th>압력단위</th>
                        <td id="_lgmv_unit_press"></td>
                    </tr>
                    <tr>
                        <th>유량 딘위</th>
                        <td id="_lgmv_unit_flux"></td>
                        <th>능력 단위</th>
                        <td id="_calorimeter_unit_cap"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </div>
</div>


<!-- Scripts -->
<script src="http://code.jquery.com/ui/1.8.18/jquery-ui.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript" src="js/bootstrap.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://code.jquery.com/ui/1.8.18/jquery-ui.min.js"></script>
<script type="text/javascript">
    function lg_model_Change() {

        var Multi_V_H_P = ["- 선택 -", "Multi V 5", "Multi V 5 A", "Multi V 5 H", "Multi V IV", "Multi V IV Plus", "Multi V lll", "Multi V II m+m", "Multi V II m+s"];
        var Multi_V_H_R = ["- 선택 -", "Multi V 5 HR", "Multi V IV HR", "Multi V III HR"];
        var Multi_V_ARUM = ["- 선택 -", "Multi V 5", "Multi V 5HR"];
        var Multi_Water = ["- 선택 -", "Water IV A", "Water IV", "Water IV HR", "Water S (Mini)", "Water II", "Water II HR"];
        var Multi_V_S = ["- 선택 -", "Residence", "Multi V S", "Multi V S HR", "Multi V S HS", "Mini"];
        var Multi_V_M = ["- 선택 -", "Multi V M"];
        var Multi_V_Space = ["- 선택 -", "N. A. Space", "Space III", "Space III 3P"];
        var GHP = ["- 선택 -", "GHP Super III", "GHP Super& II"];
        var Chiller = ["- 선택 -", "Turbo Chiller", "ABS Chiller", "Screw Chiller", "ISC Water", "ISC Super", "ISC Shell&Tube", "ISC", "ISC Super II"];
        var Therma_V = ["- 선택 -", "Split&Monobloc", "High Temp", "SystemBoiler 2nd"];
        var Single_Package = ["- 선택 -", "Single Package II", "Single Package"];
        var Single_Multi = ["- 선택 -", "Pressure", "Temp"];
        var Refrigeration = ["- 선택 -", "Super Combi", "Slim Combi", "Combi", "Condensing Unit", "Super CDU"];

        var selectItem = $("#lgmv_model_filter1").val();
        var changeItem;

        if (selectItem === "Multi V H/P") {
            changeItem = Multi_V_H_P;
        }
        else if (selectItem === "Multi V H/R") {
            changeItem = Multi_V_H_R;
        }
        else if (selectItem === "Multi V ARUM") {
            changeItem = Multi_V_ARUM;
        }
        else if (selectItem === "Multi Water") {
            changeItem = Multi_Water;
        }
        else if (selectItem === "Multi V S") {
            changeItem = Multi_V_S;
        }
        else if (selectItem === "Multi V M") {
            changeItem = Multi_V_M;
        }
        else if (selectItem === "Multi V Space") {
            changeItem = Multi_V_Space;
        }
        else if (selectItem === "GHP") {
            changeItem = GHP;
        }
        else if (selectItem === "Chiller") {
            changeItem = Chiller;
        }
        else if (selectItem === "Therma V") {
            changeItem = Therma_V;
        }
        else if (selectItem === "Single Package") {
            changeItem = Single_Package;
        }
        else if (selectItem === "Single&Multi") {
            changeItem = Single_Multi;
        }
        else if (selectItem === "Refrigeration") {
            changeItem = Refrigeration;
        }

        $('#lgmv_model_filter2').empty();

        for (var count = 0; count < changeItem.length; count++) {
            var option = $("<option value='" + changeItem[count] + "'>" + changeItem[count] + "</option>");
            $('#lgmv_model_filter2').append(option);
        }

    }


    $('section h4').click(function (event) {
        event.preventDefault();
        $(this).addClass('active');
        $(this).siblings().removeClass('active');

        var ph = $(this).parent().height();
        var ch = $(this).next().height();

        if (ch > ph) {
            $(this).parent().css({
                'min-height': ch + 'px'
            });
        } else {
            $(this).parent().css({
                'height': 'auto'
            });
        }
    });

    function tabParentHeight() {
        var ph = $('section').height();
        var ch = $('section ul').height();
        if (ch > ph) {
            $('section').css({
                'height': ch + 'px'
            });
        } else {
            $(this).parent().css({
                'height': 'auto'
            });
        }
    }

    $(window).resize(function () {
        tabParentHeight();
    });

    $(document).resize(function () {
        tabParentHeight();
    });
    tabParentHeight();


    $(function () {
        $('#datepicker').datepicker({
            dateFormat: "yy/mm/dd"
        });
    });

    function dataSearch() {
        $.ajax({
            type: 'post'
            , url: 'http://localhost:3000/api/data_search'
            , data: $("#data_search").serialize()
            , beforeSend: function () {
                $('#ajax_load_indicator').show().fadeIn('fast');
            }
            , success: function (data) {
                $('#search_result').css('display', 'inline');
                $('#search_result_table').css('display', 'table');

                $('#lg_search_result_tbody tr').remove();
                if (data.message == 'success' && data.content.length > 0) {
                    var array = data.content;
                    array.forEach(element => {
                        var id = element.header_uid;
                        var Model = element.lgmv_model_filter2;
                        var Model_name = element.lgmv_model_name;
                        var capavity = element.calorimeter_cap;
                        var sasy = element.odu_chassis;
                        var nang = element.lgmv_r;
                        var test_date = element.lgmv_date;
                        var test_performer = element.conn_tester;
                        var test_step1 = element.test_step1;
                        var test_step2 = element.test_step2;
                        var testroom = element.conn_testroom_number;

                        var serial = element.lgmv_serial_number;
                        var Model1 = element.lgmv_model_filter1;
                        var mainver = element.lgmv_main_ver;
                        var eep = element.lgmv_eep_ver;
                        var cal_power = element.calorimeter_power;
                        var cal_eer = element.calorimeter_eer;
                        var cal_vol = element.calorimeter_power_vol;
                        var cal_id_wb = element.calorimeter_id_wb;
                        var cal_id_db = element.calorimeter_id_db;
                        var cal_od_wb = element.calorimeter_od_wb;
                        var cal_od_db = element.calorimeter_od_db;
                        var idu_sassy = element.idu_chassis;
                        var plm_step1 = element.plm_step1;
                        var plm_step2 = element.plm_step2;
                        var test_kind = element.conn_pipe_type;
                        var test_result = element.conn_test_result;
                        var test_detail = element.conn_memo;
                        var idu_count = element.idu_count;
                        var odu_count = element.odu_count;
                        var hru_count = element.hru_count;
                        var cal_count = element.calorimeter_count;
                        var dxc_count = element.lgmv_sidu_dxc_count;
                        var awhp_count = element.lgmv_sidu_awhp_count;
                        var showcase_count = element.lgmv_sidu_showcase_count;
                        var fau_count = element.lgmv_sidu_fau_count;
                        var whu_count = element.lgmv_sidu_whu_count;
                        var cascade_count = element.lgmv_sidu_cascade_count;
                        var unit_temp = element.lgmv_unit_temp;
                        var unit_press = element.lgmv_unit_press;
                        var unit_flux = element.lgmv_unit_flux;


                        var rowItem = "<tr>";
                        rowItem += "<td id='detailzz" + id + "' value=" + id + " onclick=\"DetailSearch(\'" + id + "\');\">" + id + "</td>";
                        ;
                        rowItem += "<td>" + Model + "</td>";
                        rowItem += "<td>" + Model_name + "</td>";
                        rowItem += "<td>" + capavity + "</td>";
                        rowItem += "<td>" + sasy + "</td>";
                        rowItem += "<td>" + nang + "</td>";
                        rowItem += "<td>" + test_step1 + "</td>";
                        rowItem += "<td>" + test_step2 + "</td>";
                        rowItem += "<td>" + test_date + "</td>";
                        rowItem += "<td>" + test_performer + "</td>";
                        rowItem += "<td>" + testroom + "</td>";
                        rowItem += "<td><button class='data_search_btn_table' onclick=\"DetailSearch(\'" + id + "\');\">상세 보기</button></td>";
                        rowItem += "<td><button class='data_search_btn_table' onclick=\"setHeaderUid(\'" + id + "\');\">그래프 보기</button></td>";
                        rowItem += "</tr>";

                        $('#lg_search_result_tbody').append(rowItem);
                    });
                    $('#search_fail').css('display', 'none');


                } else {
                    $('#search_result').css('display', 'none');
                    $('#search_fail').css('display', 'inline');
                    $('#search_fail').html('<h1> 검색결과가 없습니다. </h1>');
                }
            }
            , error: function (data, status, err) {
                alert('서버와의 통신이 실패했습니다.');
            }
            , complete: function () {
                $('#ajax_load_indicator').fadeOut();
            }
        });
    }

    $(function () {
        $("#testDatepicker1").datepicker({
            changeMonth: true,
            changeYear: true,
            nextText: '다음 달',
            prevText: '이전 달',
            dateFormat: "yy-mm-dd"
        });
        $("#testDatepicker2").datepicker({
            changeMonth: true,
            changeYear: true,
            nextText: '다음 달',
            prevText: '이전 달',
            dateFormat: "yy-mm-dd"
        });
    });
    $(document).ready(function () {
        $.ajax({
            type: 'post'
            , url: 'http://localhost:3000/api/session'

            , beforeSend: function () {
                $('#ajax_load_indicator').show().fadeIn('fast');
            }
            , success: function (data) {
            }
            , error: function (data, status, err) {
                alert('서버와의 통신이 실패했습니다.');
            }
            , complete: function () {
                $('#ajax_load_indicator').fadeOut();
            }
        });
    });

    function DetailSearch(header_uid) {
        var params = "header_uid=" + header_uid;
        var same;
        $('#detail').css('display', 'inline');
        $('.lg_search_detail_table').css('display', 'table');
        $('#lg_detail').css('display', 'flex');

        $.ajax({
            type: 'post'
            , url: 'http://localhost:3000/api/data_search_id'
            , data: params
            , beforeSend: function () {
                $('#ajax_load_indicator').show().fadeIn('fast');
            }
            , success: function (data) {
                $('#search_result').css('display', 'inline');
                $('#search_result_table').css('display', 'table');

                // $('#lg_search_result_tbody tr:gt(0)').remove();
                // 분기 처리
                if (data.message == 'success') {
                    var element = data.content;
                    var id = element.header_uid;
                    var Model = element.lgmv_model_filter2;
                    var Model_name = element.lgmv_model_name;
                    var capavity = element.calorimeter_cap;
                    var sasy = element.odu_chassis;
                    var nang = element.lgmv_r;
                    var test_date = element.lgmv_date;
                    var test_performer = element.conn_tester;
                    var test_step1 = element.test_step1;
                    var test_step2 = element.test_step2;
                    var testroom = element.conn_testroom_number;
                    var file_date = data.content.conn_file_date;
                    var file_time = data.content.conn_file_time;

                    var serial = element.lgmv_serial_number;
                    var Model1 = element.lgmv_model_filter1;
                    var mainver = element.lgmv_main_ver;
                    var eep = element.lgmv_eep_ver;
                    var cal_power = element.calorimeter_power;
                    var cal_eer = element.calorimeter_eer;
                    var cal_vol = element.calorimeter_power_vol;
                    var cal_id_wb = element.calorimeter_id_wb;
                    var cal_id_db = element.calorimeter_id_db;
                    var cal_od_wb = element.calorimeter_od_wb;
                    var cal_od_db = element.calorimeter_od_db;
                    var idu_sassy = element.idu_chassis;
                    var plm_step1 = element.plm_step1;
                    var plm_step2 = element.plm_step2;
                    var test_kind = element.conn_pipe_type;
                    var test_result = element.conn_test_result;
                    var test_detail = element.conn_memo;
                    var idu_count = element.idu_count;
                    var odu_count = element.odu_count;
                    var hru_count = element.hru_count;
                    var cal_count = element.calorimeter_count;
                    var dxc_count = element.lgmv_sidu_dxc_count;
                    var awhp_count = element.lgmv_sidu_awhp_count;
                    var showcase_count = element.lgmv_sidu_showcase_count;
                    var fau_count = element.lgmv_sidu_fau_count;
                    var whu_count = element.lgmv_sidu_whu_count;
                    var cascade_count = element.lgmv_sidu_cascade_count;
                    var unit_temp = element.lgmv_unit_temp;
                    var unit_press = element.lgmv_unit_press;
                    var unit_flux = element.lgmv_unit_flux;
                    var operation_rate = element.conn_operation_rate;
                    var conn_pipe_type = element.conn_pipe_type;
                    var conn_memo = element.conn_memo;
                    var calorimeter_unit_cap = element.calorimeter_unit_cap;


                    same = "lgmv_serial_number=" + serial
                        + "&calorimeter_id_wb=" + cal_id_wb
                        + "&calorimeter_id_db=" + cal_id_db
                        + "&calorimeter_od_wb=" + cal_od_wb
                        + "&calorimeter_od_db=" + cal_od_db
                        + "&conn_operation_rate=" + operation_rate
                        + "&conn_testroom_number=" + testroom
                        + "&test_step2=" + test_step2
                        + "&header_uid=" + id;


                    $('#_calorimeter_cap').html(capavity);
                    $('#_lgmv_model_filter1').html(Model1);
                    $('#_lgmv_model_filter2').html(Model);
                    $('#_lgmv_model_name').html(Model_name);
                    $('#_odu_chassis').html(sasy);
                    $('#_lgmv_r').html(nang);
                    $('#_lgmv_date').html(test_date);
                    $('#_conn_operation_rate').html(operation_rate);
                    $('#_calorimeter_id_wb').html(cal_id_wb);
                    $('#_conn_tester').html(test_performer);
                    $('#_test_step1').html(test_step1);
                    $('#_test_step2').html(test_step2);
                    $('#_conn_testroom_number').html(testroom);
                    $('#_lgmv_serial_number').html(serial);
                    $('#_lgmv_main_ver').html(mainver);
                    $('#_lgmv_eep_ver').html(eep);
                    $('#_calorimeter_power').html(cal_power);
                    $('#_calorimeter_eer').html(cal_eer);
                    $('#_calorimeter_power_vol').html(cal_vol);
                    $('#_calorimeter_id_db').html(cal_id_db);
                    $('#_calorimeter_od_wb').html(cal_od_wb);
                    $('#_calorimeter_od_db').html(cal_od_db);
                    $('#_idu_chassis').html(idu_sassy);
                    $('#_plm_step1').html(plm_step1);
                    $('#_plm_step2').html(plm_step2);
                    $('#_conn_pipe_type').html(test_kind);
                    $('#_conn_test_result').html(test_result);
                    $('#_conn_memo').html(test_detail);
                    $('#_idu_count').html(idu_count);
                    $('#_odu_count').html(odu_count);
                    $('#_hru_count').html(hru_count);
                    $('#_calorimeter_count').html(cal_count);
                    $('#_lgmv_sidu_dxc_count').html(dxc_count);
                    $('#_lgmv_sidu_awhp_count').html(awhp_count);
                    $('#_lgmv_sidu_showcase_count').html(showcase_count);
                    $('#_lgmv_sidu_fau_count').html(fau_count);
                    $('#_lgmv_sidu_whu_count').html(whu_count);
                    $('#_lgmv_sidu_cascade_count').html(cascade_count);
                    $('#_lgmv_unit_temp').html(unit_temp);
                    $('#_lgmv_unit_press').html(unit_press);
                    $('#_lgmv_unit_flux').html(unit_flux);
                    $('#_calorimeter_unit_cap').html(calorimeter_unit_cap);
                    $('#_conn_file_date').html(file_date);
                    $('#_conn_file_time').html(file_time);

                    $('#search_fail').css('display', 'none');

                    sameSearch(same, id);

                } else {
                    $('#search_result').css('display', 'none');
                    $('#search_fail').css('display', 'inline');
                    $('#search_fail').html('<h1> 검색결과가 없습니다. </h1>');
                }
            }
            , error: function (data, status, err) {
                alert('서버와의 통신이 실패했습니다.');
            }
            , complete: function () {
                $('#ajax_load_indicator').fadeOut();
            }
        });

    }


    function sameSearch(same, uid) {
        $('#_same').css('display', 'flex');
        $('#_same_title').css('display', 'inline');
        $.ajax({
            type: 'post'
            , url: 'http://localhost:3000/api/data_search_detail'
            , data: same
            , beforeSend: function () {
                $('#ajax_load_indicator').show().fadeIn('fast');
            }
            , success: function (data) {
                $('#search_result').css('display', 'inline');

                $('#lg_same_test_tbody tr:gt(0)').remove();
                $('#cold_tbody tr:gt(0)').remove();
                // 분기 처리
                if (data.content.header.length > 0) {
                    var array = data.content.header;
                    array.forEach(element => {
                        var id = element.header_uid;
                        var Model = element.lgmv_model_filter2;
                        var Model_name = element.lgmv_model_name;
                        var capavity = element.calorimeter_cap;
                        var sasy = element.odu_chassis;
                        var nang = element.lgmv_r;
                        var test_date = element.lgmv_date;
                        var test_performer = element.conn_tester;
                        var test_step1 = element.test_step1;
                        var test_step2 = element.test_step2;
                        var testroom = element.conn_testroom_number;
                        //var file_date = data.content.conn_file_date;
                        //var file_time = data.content.conn_file_time;

                        var serial = element.lgmv_serial_number;
                        var Model1 = element.lgmv_model_filter1;
                        var mainver = element.lgmv_main_ver;
                        var eep = element.lgmv_eep_ver;
                        var cal_power = element.calorimeter_power;
                        var cal_eer = element.calorimeter_eer;
                        var cal_vol = element.calorimeter_power_vol;
                        var cal_id_wb = element.calorimeter_id_wb;
                        var cal_id_db = element.calorimeter_id_db;
                        var cal_od_wb = element.calorimeter_od_wb;
                        var cal_od_db = element.calorimeter_od_db;
                        var idu_sassy = element.idu_chassis;
                        var plm_step1 = element.plm_step1;
                        var plm_step2 = element.plm_step2;
                        var test_kind = element.conn_pipe_type;
                        var test_result = element.conn_test_result;
                        var test_detail = element.conn_memo;
                        var idu_count = element.idu_count;
                        var odu_count = element.odu_count;
                        var hru_count = element.hru_count;
                        var cal_count = element.calorimeter_count;
                        var dxc_count = element.lgmv_sidu_dxc_count;
                        var awhp_count = element.lgmv_sidu_awhp_count;
                        var showcase_count = element.lgmv_sidu_showcase_count;
                        var fau_count = element.lgmv_sidu_fau_count;
                        var whu_count = element.lgmv_sidu_whu_count;
                        var cascade_count = element.lgmv_sidu_cascade_count;
                        var unit_temp = element.lgmv_unit_temp;
                        var unit_press = element.lgmv_unit_press;
                        var unit_flux = element.lgmv_unit_flux;


                        if (uid == id && test_step1 == '냉방성능') {
                            $('#_cold').css('display', 'inline');

                            var calzz = data.content.cooling_performance;

                            var rowItem = "<tr>";
                            rowItem += "<td id='detailzz" + id + "' value=" + id + " onclick=\"DetailSearch(\'" + id + "\');\">" + id + "</td>";
                            ;
                            rowItem += "<td>" + calzz.compressor_1 + "</td>";
                            rowItem += "<td>" + calzz.compressor_2 + "</td>";
                            rowItem += "<td>" + calzz.odu_fan_rpm1 + "</td>";
                            rowItem += "<td>" + calzz.odu_fan_rpm2 + "</td>";
                            rowItem += "<td>" + calzz.idu1_fan_rpm + "</td>";
                            rowItem += "<td>" + calzz.main_eev + "</td>";
                            rowItem += "<td>" + calzz.sub_eev + "</td>";
                            rowItem += "<td>" + "</td>";
                            rowItem += "<td>" + calzz.EER + "</td>";
                            rowItem += "</tr>";
                            $('#cold_tbody').append(rowItem);

                        }
                        else {

                        }


                        var rowItem = "<tr>";
                        rowItem += "<td id='detailzz" + id + "' value=" + id + " onclick=\"DetailSearch(\'" + id + "\');\">" + id + "</td>";
                        ;
                        rowItem += "<td>" + Model + "</td>";
                        rowItem += "<td>" + Model_name + "</td>";
                        rowItem += "<td>" + capavity + "</td>";
                        rowItem += "<td>" + sasy + "</td>";
                        rowItem += "<td>" + nang + "</td>";
                        rowItem += "<td>" + test_step1 + "</td>";
                        rowItem += "<td>" + test_step2 + "</td>";
                        rowItem += "<td>" + test_date + "</td>";
                        rowItem += "<td>" + test_performer + "</td>";
                        rowItem += "<td>" + testroom + "</td>";
                        rowItem += "</tr>";

                        $('#lg_same_test_tbody').append(rowItem);
                    });
                    $('#search_fail').css('display', 'none');


                } else {
                    $('#search_result').css('display', 'none');
                    $('#search_fail').css('display', 'inline');
                    $('#search_fail').html('<h1> 검색결과가 없습니다. </h1>');
                }
            }
            , error: function (data, status, err) {
                alert('서버와의 통신이 실패했습니다.');
            }
            , complete: function () {
                $('#ajax_load_indicator').fadeOut();
            }
        });
    }

    function setHeaderUid(index) {
        window.location.href = "graph.html?index=" + index;
    }
</script>
</body>
<!--page 전체 && SideBar Css-->
<style>
    .full-page {
        display: flex;
        flex-direction: column;
        height: 100%;
    }

    #img_logo {
        width: 110px;
        height: 80px;
        margin-right: 20px;
    }

    /*lg_content Css*/
    #lg_contents {
        margin-left: 200px;
        margin-top: 100px;
        margin-right: 80px;
        display: flex;
        flex-direction: column;
        flex-wrap: wrap;
    }

    /*sidebar css start*/

    /*sidebar는 고정되어 있어야 하므로 flex none 설정*/
    .full-page #lg_sidebar {
        flex: none;
        position: fixed;
        width: 150px;
        height: 100%;
        font-family: sans-serif;
    }

    .full-page #lg_sidebar {
        flex: none;
        position: fixed;
        width: 150px;
        margin-top: 80px;
        height: 100%;
        font-family: sans-serif;
    }

    #lg_sidebar {
        background-color: white;
    }

    #lg_sidebar #lg_sidebar_content {
        margin: 1.5em 0.4em 0.2em;
        background-color: #38222b;
        padding: 2em 1em;
        box-shadow: 3px 5px 3px;
    }

    /* sidebar 안에 있는 링크들 */
    #lg_sidebar a {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-bottom: 1em;
        font-size: 0.9em;
        font-family: "Adobe 명조 Std M";
        color: white;
    }

    #lg_sidebar a:hover {
        font-weight: bold;
        text-decoration: #1c7430 solid;
    }

</style>
<!--유사 시험 테이블Css-->
<style>
    .lg_circle:before {
        content: "";
        display: inline-block;
        width: 10px;
        height: 10px;
        margin-right: 5px;
        border: 2px solid #d80546;
        border-radius: 50%;
    }
</style>

<!--id 입력 검색창-->
<style>
    #lg_search_box {
        width: 100%;
        padding: 10px;
        background-color: rgb(250, 250, 250);
    }

    #lg_search_id {
        display: flex;
    }

    #id_search {
        display: block;
        width: 100%;
        height: 32px;
        font-size: 13px;
        line-height: 1.42857143;
        color: #555;
        background: #fff none;
        border: 1px solid  #cecece;
        padding: 5px 12px;
    }

    .lg_text {
        font-weight: bold;
        font-size: 12px;
        min-width: 80px;
        justify-self: center;
        align-self: center;
        text-align: right;
        line-height: 1.42857143;
        margin-right: 5px;
    }

    .lg_select_model_filter {
        width: 100%;
        height: 32px;
        padding: 5px 12px;
        font-size: 13px;
        line-height: 1.42857143;
        color: #555;
        background: #fff none;
        border: 1px solid  #cecece;
    }

    #lg_search_necessary {
        display: flex;
        flex-direction: row;
        flex: 1;
        width: 100%;
    }

    #lg_search_necessary_items {
        width: 100%;
        display: flex;
        align-items: center;
    }

    #lg_search_necessary_items .lg_search_necessary_item {
        width: 100%;
        margin-bottom: 20px;
        display: flex;
    }

    #lg_search_detail {
        display: flex;
        flex-direction: column;
        flex: 1;
        width: 100%;
    }

    #lg_search_detail_1_items {
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    #lg_search_detail_1_items .lg_search_detail_1_item {
        width: 100%;
        display: flex;
    }

    .lg_search_date_box {
        display: block;
        width: 100%;
        height: 32px;
        font-size: 13px;
        line-height: 1.12857143;
        color: #555;
        background: #fff none;
        border: 1px solid #cecece;
        margin: 5px;
    }

    #lg_search_detail_2_items {
        display: flex;
        flex-direction: row;
        flex: 1;
        width: 100%;
    }

    #lg_search_detail_2_items .lg_search_detail_2_item {
        width: 100%;
        display: flex;
    }

    .detail_2_item_input {
        display: block;
        width: 100%;
        height: 32px;
        font-size: 13px;
        line-height: 1.12857143;
        color: #555;
        background: #fff none;
        border: 1px solid #cecece;
        margin: 5px;
        padding: 5px 12px;
    }

    .data_search_btn {
        display: inline-block;
        margin-bottom: 0;
        font-weight: 400;
        text-align: center;
        vertical-align: top;
        touch-action: manipulation;
        background-color: rgb(105, 109, 114);
        border-width: 1px;
        padding: 6px 12px;
        font-size: 13px;
        color: rgb(223, 223, 225);
        line-height: 1.42857143;
        border-radius: 4px;
        user-select: none;
        float: right;
    }

    .data_search_btn_table {
        display: inline-block;
        margin-bottom: 0;
        font-weight: 400;
        text-align: center;
        vertical-align: top;
        touch-action: manipulation;
        background-color: rgb(105, 109, 114);
        border-width: 1px;
        padding: 6px 12px;
        font-size: 11px;
        color: rgb(223, 223, 225);
        line-height: 1.42857143;
        border-radius: 4px;
        user-select: none;
    }
</style>
<!--검색 결과 테이블-->
<style>
    #search_result_table {
        display: none;
        flex-direction: column;
        width: 100%;
        margin: 0 0 50px;
    }

    #search_result_table tbody tr:nth-child(1) th {
        background: #f1f0f0;
        border-top: 2px solid rgb(163, 163, 163);
        text-align: center;
        font-size: 11px;
        font-weight: 700;
    }

    #search_result_table .table tbody > tr > th {
        height: 45px;
        padding-right: 20px;
        background: #f1f0f0;
        font-weight: 700;
        text-align: right;
    }

    #search_result_table .table tbody > tr > td {
        background: #fff;
        word-break: break-all;
        white-space: pre-wrap;
    }

    #search_result_table tbody > tr {
        border-bottom: 1px solid rgb(163, 163, 163);
    }

    #lg_search_result_tbody tr > td {
        padding: 8px 10px;
        background: #fff;
        word-break: break-all;
        white-space: pre-wrap;
        font-size: 13px;
        text-align: center;
        vertical-align: middle;
    }
</style>
<!--상세 결과 테이블-->
<style>
    #search_result {
        margin-top: 25px;
        display: flex;
        flex-direction: column;
    }

    #lg_detail {
        flex-direction: column;
        display: none;
    }

    .lg_search_detail_table {
        display: none;
        flex-direction: column;
        width: 80%;
        align-self: start;
        margin-bottom: 50px;
    }

    .lg_search_detail_table tr:nth-child(1) {
        border-top: 2px solid rgb(163, 163, 163);
    }

    .lg_search_detail_table tbody > tr > th {
        height: 45px;
        padding-right: 20px;
        background: #f1f0f0;
        font-weight: 700;
        text-align: right;
    }

    #_conn_memo {
        max-width: 200px;
    }
</style>
</html>