<head>
    <title>LG R&D Data</title>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="css/bootstrap.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
<div style="width: 100%; position: fixed; background:#ffffff;z-index:100; padding: 1px; border-bottom :3px solid #d80546">
    <div style="margin-left: 0px;font-size: 24px;">
        <img id="img_logo" src="./r&d_data.png"></img>
        <span style="font-weight: normal; font-family: -apple-system, BlinkMacSystemFont !important;">R&D Data</span>
    </div>
</div>
<div class="full-page">
    <div id="lg_sidebar">
        <div align="right">
        </div>
        <div id="lg_sidebar_content">
            <a href="home.html">홈</a>
            <a href="data_search.html">데이터 검색</a>
            <a href="#" style="color: white" id="unit_option" onclick="unit_click()">단위 옵션</a>
            <a href="#" onclick="admin_mode()">관리자 모드</a>
            <div id="admin_tabs" style="display: none; color: white; flex-direction: column; float:right">
                <a href="admin_id_generation.html">▷ 아이디 발급</a>
                <a href="admin_db_deletion.html">▷ 데이터 삭제</a>
            </div>
            <div id="unit_options"
                 style="position:absolute; margin-bottom:50px; bottom:0; font-size:13px;  display: none; color:white; flex-direction: column">
                <div style="margin: auto;text-align: center;">
                    LGMV 온도 단위
                    <select id="lgmv_temp" class="input_option" style="margin-bottom: 10px; width: 100px;">
                        <option value="F">F</option>
                        <option value="C">C</option>
                    </select>
                </div>
                <div style="margin: auto;text-align: center;">
                    LGMV 압력 단위
                    <select id="lgmv_pressure" class="input_option" style="margin-bottom: 10px; width: 100px;">
                        <option value="kPa">kPa</option>
                        <option value="Psi">Psi</option>
                        <option value="kgcm">kgcm</option>
                    </select>
                </div>
                <div style="margin: auto;text-align: center;">
                    LGMV 유량 단위
                    <select id="lgmv_flux" class="input_option" style="width: 100px;">
                        <option value="m3/h">m3/h</option>
                        <option value="gal/m">gal/m</option>
                    </select>
                </div>
                <button id="save_btn" type="button" class="option_save_btn" data-toggle="modal"
                        data-target="#optionModal" style="width: 100px; margin: 10px">save
                </button>
            </div>
        </div>
    </div>
    <div id="lg_contents">
        <div>
            <div id="lg_db_count">
                <span>전체 DB 수 </span>
                <br>
                <span id="num_db" style="margin-left: 1em; font-size: 50px"></span><span>개</span>
            </div>

            <div class="row" style="margin: 2em;">
                <div class="col-md-6">
                    <div id="lg_dataset_by_model_header">
                        Dataset by Model
                    </div>
                    <div id="chart_div1" class="chart"></div>
                </div>
                <div class="col-md-6 no-padding">
                    <div id="lg_dataset_by_test_header">
                        Dataset by Test
                    </div>
                    <div id="chart_div2" class="chart"></div>
                </div>
            </div>
        </div>

        <div id="lg_chamber_content">
            <h6 class="lg_circle" style="margin-top: 10px">최근시험이력
                <h6>
                    <table id="lg_chember_table" class="table table-bordered table-hover table-condensed">
                        <tr id="lg_chember_table_thead">
                            <td>ID</td>
                            <td>시험 날짜</td>
                            <td>총 시험시간</td>
                            <td>챔버 번호</td>
                            <td>모델 정보</td>
                            <td>시험 항목</td>
                            <td>시험자</td>
                        </tr>
                        <tbody id="detail_body">
                        </tbody>
                    </table>

        </div>
        <div id="lg_chamber_graph" style="width: 100%" class="row">
            <div class="col-md-12">
                <h6 class="lg_circle" style="margin-top: 10px">챔버 상태</h6>
                <p>챔버번호 : <select id="index">
                </select>
                    <button id="lg_see_graph_btn" style="margin-left: 1em" onClick='SelectUnit()'>그래프 보기</button>

                </p>

                <div id="Line_Controls_Chart">
                    <!-- 라인 차트 생성할 영역 -->
                    <div id="lineChartArea" style="padding:0px 20px 0px 0px;"></div>
                    <!-- 컨트롤바를 생성할 영역 -->
                    <div id="controlsArea" style="padding:0px 20px 0px 0px;"></div>
                </div>
                <div id="selectgraph1">
                    <form id="selectgraph">

                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="optionModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel" style="font-size: 13px">Message</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    옵션이 저장되었습니다.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">확인</button>
                </div>
            </div>
        </div>
    </div>

</div>

</body>

<script type="text/javascript" src="js/bootstrap.js"></script>
<script src="https://d3js.org/d3-array.v2.min.js"></script>
<script src="https://d3js.org/d3-color.v1.min.js"></script>
<script src="https://d3js.org/d3-format.v1.min.js"></script>
<script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
<script src="https://d3js.org/d3-time.v1.min.js"></script>
<script src="https://d3js.org/d3-time-format.v2.min.js"></script>
<script src="https://d3js.org/d3-scale.v3.min.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script src="https://d3js.org/d3-array.v2.min.js"></script>
<script src="https://d3js.org/d3-color.v1.min.js"></script>
<script src="https://d3js.org/d3-format.v1.min.js"></script>
<script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
<script src="https://d3js.org/d3-time.v1.min.js"></script>
<script src="https://d3js.org/d3-time-format.v2.min.js"></script>
<script src="https://d3js.org/d3-scale.v3.min.js"></script>

<script data-require="d3@4.0.0" data-semver="4.0.0" src="https://d3js.org/d3.v4.min.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script>
    // 차트를 사용하기 위한 준비입니다.

    google.charts.load('current', {packages: ['corechart']});
</script>
<script>
    var num_db = 0
    var x = [
        "Multi V H/P",
        "Multi V H/R",
        "Multi V ARUM",
        "Multi Water",
        "Multi V S",
        "Multi V M",
        "Multi V Space",
        "GHP",
        "Chiller",
        "Therma V",
        "Single Package",
        "Single&Multi",
        "Refrigeration",
    ];
    var testx = [
        "성능",
        "냉방성능",
        "난방성능",
        "안정성",
        "신뢰성",
        "기타"
    ];
    $(document).ready(function () {

        $.ajax({
            type: 'post'
            , url: 'http://localhost:3000/api/overview'

            , beforeSend: function () {
                $('#ajax_load_indicator').show().fadeIn('fast');
            }
            , success: function (data1) {

                var margin = {top: 30, right: 30, bottom: 70, left: 60},
                    width = 460 - margin.left - margin.right,
                    height = 400 - margin.top - margin.bottom;

                // append the svg object to the body of the page
                var svg = d3.select("#my_dataviz")
                    .append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                    .attr("transform",
                        "translate(" + margin.left + "," + margin.top + ")");

                var svg2 = d3.select("#my_testviz")
                    .append("svg")
                    .attr("width", width + margin.left + margin.right)
                    .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                    .attr("transform",
                        "translate(" + margin.left + "," + margin.top + ")");

                // Parse the Data

                var data = data1.content.model;
                var data2 = data1.content.test;

                data.forEach(element => {
                    num_db += element.count;
                });

                $("#num_db").html(num_db)
                //

                // X axis
                var x = d3.scaleBand()
                    .range([0, width])
                    .domain(data.map(function (d) {
                        return d.name;
                    }))
                    .paddingInner(0.2);
                svg.append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x))
                    .selectAll("text")
                    .attr("transform", "translate(-10,0)rotate(-45)")
                    .style("text-anchor", "end")
                    .style("color", "#69b3a2");

                var x2 = d3.scaleBand()
                    .range([0, width])
                    .domain(data2.map(function (d) {
                        return d.name;
                    }))
                    .paddingInner(0.2);
                svg2.append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x2))
                    .selectAll("text")
                    .attr("transform", "translate(-10,0)rotate(-45)")
                    .style("text-anchor", "end")
                    .style("color", "#69b3a2");

                // Add Y axis

                var y = d3.scaleLinear()
                    .domain([0, d3.max(data, function (d) {
                        return d.count;
                    }) + 3])
                    .range([height, 0]);
                svg.append("g")
                    .call(d3.axisLeft(y));

                var y2 = d3.scaleLinear()
                    .domain([0, d3.max(data2, function (d) {
                        return d.count;
                    }) + 3])
                    .range([height, 0]);
                svg2.append("g")
                    .call(d3.axisLeft(y2));

                // Bars
                svg.selectAll("mybar")
                    .data(data)
                    .enter()
                    .append("rect")
                    .attr("x", function (d) {
                        return x(d.name);
                    })
                    .attr("y", function (d) {
                        return y(d.count);
                    })
                    .attr("width", x.bandwidth())
                    .attr("height", function (d) {
                        return height - y(d.count);
                    })
                    .attr("fill", "#69b3a2")
                    .on("mouseover", function () {
                        tooltip.style("display", null);
                        tooltip.style("color", "white")
                    })
                    .on("mouseout", function () {
                        tooltip.style("display", "none");
                    })
                    .on("mousemove", function (d) {
                        tooltip.style("left", (d3.event.pageX + 10) + "px");
                        tooltip.style("top", (d3.event.pageY - 10) + "px");
                        tooltip.text(d.count);
                    });

                svg2.selectAll("mybar")
                    .data(data2)
                    .enter()
                    .append("rect")
                    .attr("x", function (d) {
                        return x2(d.name);
                    })
                    .attr("y", function (d) {
                        return y2(d.count);
                    })
                    .attr("width", x2.bandwidth())
                    .attr("height", function (d) {
                        return height - y2(d.count);
                    })
                    .attr("fill", "#69b3a2")
                    .on("mouseover", function () {
                        tooltip.style("display", null);
                        tooltip.style("color", "white")
                    })
                    .on("mouseout", function () {
                        tooltip.style("display", "none");
                    })
                    .on("mousemove", function (d) {
                        tooltip.style("left", (d3.event.pageX + 10) + "px");
                        tooltip.style("top", (d3.event.pageY - 10) + "px");
                        tooltip.text(d.count);
                    });


                var tooltip = d3.select("body").append("div")
                    .attr("class", "toolTip")
                    .style("display", "none");


            }
            , error: function (data, status, err) {
                console.log("error forward : " + data);
                alert('서버와의 통신이 실패했습니다.');
            }
            , complete: function () {
                $('#ajax_load_indicator').fadeOut();
            }
        });
    });


    var array;
    var indexName;

    $(document).ready(function () {
        model_array = [['모델', '갯수']];
        $.ajax({
            type: 'post'
            , url: 'http://localhost:3000/api/overview'
            , beforeSend: function () {
                $('#ajax_load_indicator').show().fadeIn('fast');
            }
            , success: function (data) {
                for (let i = 0; i < data.content.model.length; i++) {
                    var temp = []
                    temp.push(data.content.model[i].name)
                    temp.push(data.content.model[i].count)
                    model_array.push(temp)

                    if (i === data.content.model.length - 1) {
                        // drawChart(model_array)
                    }
                }
            }
            , error: function (data, status, err) {
                console.log("error forward : " + data);
                alert('서버와의 통신이 실패했습니다.');
            }
            , complete: function () {
                $('#ajax_load_indicator').fadeOut();
            }
        })


        $.ajax({
            type: 'post'
            , url: 'http://localhost:3000/api/session'

            , beforeSend: function () {
                $('#ajax_load_indicator').show().fadeIn('fast');
            }
            , success: function (data) {
            }
            , error: function (data, status, err) {
                console.log("error forward : " + data);
                alert('서버와의 통신이 실패했습니다.');
            }
            , complete: function () {
                $('#ajax_load_indicator').fadeOut();
            }
        });
    });

    var cham_number = [];

    $(document).ready(function () {
        $.ajax({
            type: 'post'
            , url: 'http://localhost:3000/api/chamber/chamber_testroom_number'

            , beforeSend: function () {
                $('#ajax_load_indicator').show().fadeIn('fast');
            }
            , success: function (data) {
                cham_number = data.testroom_number;
                $('#index').append($("<option value=\"" + "\">- 선택 -</option>"));
                for (var i = 0; i < cham_number.length; i++) {
                    var option = $("<option value=\"" + cham_number[i] + "\">" + cham_number[i] + "</option>")
                    $('#index').append(option);
                }
            }
            , error: function (data, status, err) {
                console.log("error forward : " + data);
                alert('서버와의 통신이 실패했습니다.');
            }
            , complete: function () {
                $('#ajax_load_indicator').fadeOut();
            }
        });
    });

    $(document).ready(function () {
        $.ajax({
            type: 'post'
            , url: 'http://localhost:3000/api/chamber/recent_test'

            , beforeSend: function () {
                $('#ajax_load_indicator').show().fadeIn('fast');
            }
            , success: function (data) {
                for (var i = 0; i < data.content.length; i++) {
                    var cham_id = data.content[i].header_uid;
                    var cham_date = data.content[i].conn_file_date;
                    var test_time = data.test_time[i];
                    var cham_room = data.content[i].conn_testroom_number;
                    var model_ver = data.content[i].lgmv_model_name;
                    var test_step = data.content[i].test_step2;
                    var tester = data.content[i].conn_tester;

                    var row = "<tr>";
                    row += "<td>" + cham_id + "</td>";
                    row += "<td>" + cham_date + "</td>";
                    row += "<td>" + test_time + "</td>";
                    row += "<td>" + cham_room + "</td>";
                    row += "<td>" + model_ver + "</td>";
                    row += "<td>" + test_step + "</td>";
                    row += "<td>" + tester + "</td>";
                    row += "</tr>"

                    $('#detail_body').append(row);

                    if (i >= 5) {
                        break;
                    }
                }
            }
            , error: function (data, status, err) {
                console.log("error forward : " + data);
                alert('서버와의 통신이 실패했습니다.');
            }
            , complete: function () {
                $('#ajax_load_indicator').fadeOut();
            }
        });


    });


    function SelectUnit() {
        var good = $('#index').val();
        var params = "testroom_number=" + good;
        $.ajax({
            type: 'post'
            , url: 'http://localhost:3000/api/chamber/chamber_status'
            , data: params
            , beforeSend: function () {
                $('#ajax_load_indicator').show().fadeIn('fast');
            }
            , success: function (data) {
                // var all_lenght = 0;
                // for (var i = 0; i < data.month.length; i++) {
                //     for (var j = 0; j < data.month[i].length; j++) {
                //         all_lenght = all_lenght + 1;
                //     }
                // }

                // array = new Array(180);
                // for (var i = 0; i < 180; i++) {
                //     array[i] = new Array();
                // }
                // indexName = ['Date', 'ida_wb', 'ida_db', 'idb_db', 'idb_db', 'od_wb', 'od_db'];


                // function getDateStr(myDate) {
                //     var year = myDate.getFullYear();
                //     var month = ("0" + (myDate.getMonth() + 1)).slice(-2);
                //     var day = ("0" + myDate.getDate()).slice(-2);
                //     return (year + '.' + month + '.' + day);
                // }


                // for (var i = 0; i < 180; i++) {
                //     var today = new Date();
                //     var getday = today.getDate();
                //     var date_modify;
                //     var flag = 0;
                //     today.setDate(getday - (180 - i));
                //     array[i].push(new Date(today));
                //     for (var j = 0; j < data.month.length; j++) {
                //         for (var k = 0; k < data.month[j].length; k++) {
                //             date_modify = (data.month[j][k].conn_file_date);
                //             if (date_modify == getDateStr(today)) {
                //                 array[i].push(data.month[j][k].conn_ida_wb_gap);
                //                 array[i].push(data.month[j][k].conn_ida_db_gap);
                //                 array[i].push(data.month[j][k].conn_idb_wb_gap);
                //                 array[i].push(data.month[j][k].conn_idb_db_gap);
                //                 array[i].push(data.month[j][k].conn_od_wb_gap);
                //                 array[i].push(data.month[j][k].conn_od_db_gap);
                //                 flag = 1;
                //             }
                //         }
                //     }
                //     if (flag == 0) {
                //         array[i].push(0);
                //         array[i].push(0);
                //         array[i].push(0);
                //         array[i].push(0);
                //         array[i].push(0);
                //         array[i].push(0);

                //     }
                // }

                var all_lenght = 0;
                for (var i = 0; i < data.month.length; i++) {
                    for (var j = 0; j < data.month[i].length; j++) {
                        all_lenght = all_lenght + 1;
                    }
                }
                console.log(all_lenght);
                array = new Array(all_lenght);
                for (var i = 0; i < all_lenght; i++) {
                    array[i] = new Array();
                }
                indexName = ['Date', 'ida_wb', 'ida_db', 'idb_db', 'idb_db', 'od_wb', 'od_db'];
                var countzz = 0;
                var indexzz = 0
                for (var i = 0; i < data.month.length; i++) {
                    for (var j = 0; j < data.month[i].length; j++) {
                        var date_modify = (data.month[i][j].conn_file_date);
                        console.log(date_modify);
                        array[indexzz].push(new Date(date_modify));
                        array[indexzz].push(data.month[i][j].conn_ida_wb_gap);
                        array[indexzz].push(data.month[i][j].conn_ida_db_gap);
                        array[indexzz].push(data.month[i][j].conn_idb_wb_gap);
                        array[indexzz].push(data.month[i][j].conn_idb_db_gap);
                        array[indexzz].push(data.month[i][j].conn_od_wb_gap);
                        array[indexzz].push(data.month[i][j].conn_od_db_gap);
                        indexzz = indexzz + 1;
                    }
                }

                ///////////

                drawingZZ(array, indexName, all_lenght);
            }
            , error: function (data, status, err) {
                console.log("error forward : " + data);
                alert('서버와의 통신이 실패했습니다.');
            }
            , complete: function () {
                $('#ajax_load_indicator').fadeOut();
            }
        });
    }


    function drawingZZ(array, indexName, arraylength) {
        var chartDrowFun = {

            chartDrow: function () {
                var chartData = '';

                //날짜형식 변경하고 싶으시면 이 부분 수정하세요.
                var chartDateformat = 'yyyy년 MM월 dd일';
                //라인차트의 라인 수
                var chartLineCount = 10;
                //컨트롤러 바 차트의 라인 수
                var controlLineCount = 10;


                function drawDashboard() {

                    var data = new google.visualization.DataTable();
                    var distinct = [];
                    //그래프에 표시할 컬럼 추가

                    data.addColumn('date', indexName[0]);
                    for (var i = 1; i < indexName.length; i++) {
                        data.addColumn('number', indexName[i]);


                    }
                    // data.addColumn('date' , '날짜');
                    // data.addColumn('number'   , '전체');

                    //그래프에 표시할 데이터
                    var dataRow = [];
                    var mindata;


                    for (var i = 0; i < arraylength; i++) { //데이터 삽입
                        // var total   = datazz[i].value;
                        // var datezz = datazz[i].TXT_TIME;
                        // console.log(datezz);
                        // dataRow = [new Date(datezz),total];

                        data.addRow(array[i]);
                        mindata = Math.min(array[i]);
                    }


                    var chart = new google.visualization.ChartWrapper({
                        chartType: 'LineChart',
                        containerId: 'lineChartArea', //라인 차트 생성할 영역
                        options: {
                            // chartArea : {right:136},
                            isStacked: 'percent',
                            focusTarget: 'category',
                            height: 500,
                            width: '100%',
                            legend: {position: "top", textStyle: {fontSize: 13}},
                            pointSize: 5,
                            tooltip: {textStyle: {fontSize: 12}, showColorCode: true, trigger: 'both'},
                            hAxis: {
                                format: chartDateformat, gridlines: {
                                    count: chartLineCount, units: {
                                        years: {format: ['yyyy년']},
                                        months: {format: ['MM월']},
                                        days: {format: ['dd일']},
                                    }
                                }, textStyle: {fontSize: 12}
                            },

                            // series:{
                            //     0:{targetAxisIndex:0},
                            //     1:{targetAxisIndex:1},
                            //     2:{targetAxisIndex:2},
                        },
                        vAxes: {
                            minValue: 10, viewWindow: {min: mindata}, gridlines: {count: -1}, textStyle: {fontSize: 12},
                            //   1:{label: '˚C',minValue: 10,viewWindow:{min:mindata},gridlines:{count:-1},textStyle:{fontSize:12},side:'left'},
                            //   2:{title: 'kPa',minValue: 10,viewWindow:{min:mindata},gridlines:{count:-1},textStyle:{fontSize:12},position:'left'},
                            //   },
                            // animation: {startup: true, duration: 1000, easing: 'in'},
                            annotations: {
                                pattern: chartDateformat,
                                textStyle: {
                                    fontSize: 15,
                                    bold: true,
                                    italic: true,
                                    color: '#871b47',
                                    auraColor: '#d799ae',
                                    opacity: 0.8,
                                    pattern: chartDateformat
                                }
                            },

                        }
                    });

                    var control = new google.visualization.ControlWrapper({
                        controlType: 'ChartRangeFilter',
                        containerId: 'controlsArea',  //control bar를 생성할 영역
                        options: {
                            ui: {
                                chartType: 'LineChart',
                                chartOptions: {
                                    chartArea: {'width': '60%', 'height': 80},
                                    hAxis: {
                                        'baselineColor': 'none', format: chartDateformat, textStyle: {fontSize: 12},
                                        gridlines: {
                                            count: controlLineCount, units: {
                                                years: {format: ['yyyy년']},
                                                months: {format: ['MM월']},
                                                days: {format: ['dd일']},
                                            }
                                        }
                                    }
                                }
                            },
                            filterColumnIndex: 0
                        }
                    });

                    var date_formatter = new google.visualization.DateFormat({pattern: chartDateformat});
                    date_formatter.format(data, 0);

                    var dashboard = new google.visualization.Dashboard(document.getElementById('Line_Controls_Chart'));
                    window.addEventListener('resize', function () {
                        dashboard.draw(data);
                    }, false); //화면 크기에 따라 그래프 크기 변경
                    dashboard.bind([control], [chart]);
                    dashboard.draw(data);

                }

                google.charts.setOnLoadCallback(drawDashboard);

            }
        }
        // $(document).ready(function(){
        google.charts.load('current', {'packages': ['line', 'controls']});
        google.charts.load('current', {packages: ['corechart', 'controls']});
        chartDrowFun.chartDrow(); //chartDrow() 실행
        //  });
    }

</script>
<script>
    google.charts.load("current", {packages: ["corechart"]});
    google.charts.setOnLoadCallback(drawChart1);
    chart1_data = [['model', '갯수', { role: 'style' }]]
    chart2_data = [['시험', '갯수',{ role: 'style' }]]

    async function drawChart1() {
        if (chart1_data.length === 1) {
            await $.ajax({
                type: 'post'
                , url: 'http://localhost:3000/api/overview'

                , beforeSend: function () {
                    $('#ajax_load_indicator').show().fadeIn('fast');
                }
                , success: await function (data1) {
                    for (let i = 0; i < data1.content.model.length; i++) {
                        var temp1 = []
                        temp1.push(data1.content.model[i].name)
                        temp1.push(data1.content.model[i].count)
                        temp1.push('gray')
                        chart1_data.push(temp1)
                    }
                    for (let i = 0; i < data1.content.test.length; i++) {
                        var temp2 = []
                        temp2.push(data1.content.test[i].name)
                        temp2.push(data1.content.test[i].count)
                        temp2.push('gray')
                        chart2_data.push(temp2)
                    }

                    google.load("visualization", "1", {packages: ["corechart"]});
                    google.setOnLoadCallback(drawChart2);
                }
                , error: function (data, status, err) {
                    console.log("error forward : " + data);
                    alert('서버와의 통신이 실패했습니다.');
                }
                , complete: function () {
                    $('#ajax_load_indicator').fadeOut();
                }
            });
        }


        var data = google.visualization.arrayToDataTable(chart1_data);

        var options = {
            height: 350,
            hAxis: {
                titleTextStyle: {color: 'red'},
                fontSize: 10
            },
            bar: {groupWidth: "30%", color: '#333333'},
            legend: {position: "none"},
            orientation: 'vertical',
            rectArea: {
                backgroundColor: {
                    stroke: '#4322c0',
                    strokeWidth: 3
                }
            }
        };

        var chart = new google.visualization.BarChart(document.getElementById('chart_div1'));
        chart.draw(data, options);
    }


    async function drawChart2() {

        var data = google.visualization.arrayToDataTable(chart2_data);

        var options = {
            height: 350,
            hAxis: {
                titleTextStyle: {color: 'red'},
                fontSize: 10
            },
            bar: {groupWidth: "30%"},
            legend: {position: "none"},
            orientation: 'vertical'

        };

        var chart = new google.visualization.BarChart(document.getElementById('chart_div2'));
        chart.draw(data, options);
    }

    $(window).resize(function () {
        drawChart1();
        drawChart2();
    });
</script>
<script>
    $(document).ready(function () {
        if (localStorage['lgmv_temp']) {
            $('#lgmv_temp').val(localStorage['lgmv_temp'])
        }
        if (localStorage['lgmv_press']) {
            $('#lgmv_pressure').val(localStorage['lgmv_press'])
        }
        if (localStorage['lgmv_flux']) {
            $('#lgmv_flux').val(localStorage['lgmv_flux'])
        }
    });

    function unit_click() {
        if ($("#unit_options").css("display") == "none") {
            $('#unit_options').css("display", "flex");
        } else {
            $('#unit_options').hide();
        }
    };
    function admin_mode() {
        if ($("#admin_tabs").css("display") == "none") {
            $('#admin_tabs').css("display", "flex");
        } else {
            $('#admin_tabs').hide();
        }
    };
    $("#save_btn").click(function () {
        lgmv_temp = $('#lgmv_temp option:selected').val()
        lgmv_pressure = $('#lgmv_pressure option:selected').val()
        lgmv_flux = $('#lgmv_flux option:selected').val()
        localStorage['lgmv_temp'] = lgmv_temp
        localStorage['lgmv_press'] = lgmv_pressure
        localStorage['lgmv_flux'] = lgmv_flux
        $('#unit_options').css("display", "none");

    });
</script>
<style>
    .input_option {
        display: block;
        width: 100%;
        height: 32px;
        font-size: 13px;
        line-height: 1.12857143;
        color: #555;
        background: #fff none;
        border: 1px solid #cecece;
        margin: 5px;
        padding: 5px 12px;
    }

    .option_save_btn {
        display: inline-block;
        margin-bottom: 0;
        font-weight: 400;
        text-align: center;
        vertical-align: top;
        touch-action: manipulation;
        background-color: rgb(105, 109, 114);
        border-width: 1px;
        padding: 6px 12px;
        font-size: 13px;
        color: rgb(223, 223, 225);
        line-height: 1.42857143;
        border-radius: 4px;
        user-select: none;
    }

</style>

<!--full box & sidebar Css-->
<style>
    .full-page {
        display: flex;
        flex-direction: column;
        height: 100%;
    }

    #img_logo {
        width: 60px;
        height: 40px;
        margin-right: 0px;
    }

    /*lg_content Css*/
    #lg_contents {
        margin-left: 200px;
        margin-top: 100px;
        margin-right: 250px;
        display: flex;
        flex-direction: column;
        flex-wrap: wrap;
    }

    /*sidebar css start*/

    /*sidebar는 고정되어 있어야 하므로 flex none 설정*/
    .full-page #lg_sidebar {
        flex: none;
        position: fixed;
        width: 150px;
        Margin-top: 40px;
        height: 100%;
        font-family: sans-serif;
        background-color: #333;
    }

    #lg_sidebar {
        background-color: white;
    }

    #lg_sidebar #lg_sidebar_content {
        margin: 0em 0em 0em;
        background-color: #333;
        padding: 2em 1em;
        box-shadow: 0px 0px 0px;
    }

    /* sidebar 안에 있는 링크들 */
    #lg_sidebar a {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-bottom: 1em;
        font-size: 0.9em;
        font-family: "Adobe 명조 Std M";
        color: white;
    }

    #lg_sidebar a:hover {
        font-weight: bold;
        text-decoration: #1c7430 solid;
    }

    #lg_db_count {
        text-align: left;
        font-weight: bold;
        margin: 2.5em 1em 1em 4em;

    }
</style>
<!--contents Css-->
<style>

    #lg_dataset_by_model_header {
        display: flex;
        background-color: #333;
        padding: 0.8em;
        color: white;
        font-family: "Adobe 명조 Std M";
    }

    #lg_dataset_by_test_header {
        display: flex;
        background-color: #333;
        padding: 0.8em;
        font-family: "Adobe 명조 Std M";
        color: white;
    }
</style>
<!--lg chamber content css-->
<style>
    #lg_chamber_content {
        font-weight: bold;
        font-family: "Adobe 명조 Std M";
        margin-top: 2em;
        margin-right: 0;
        margin: 3em;
        color: black;
        font-size: 0.9em;
    }

    #lg_chember_table_thead {
        border-right: 1px solid #1d2124;
        border-bottom: 2px solid #1d2124;
        padding: 10px;
        vertical-align: top;
        background-color: #333;
        color: white;
    }

    #detail_body td {
        margin: 0.1em;
        padding: 0.5em;
        font-family: "Fira Code";
        height: 80%;
    }

</style>
<!--lg_chamber_graph css-->

<!--lg_circle-->
<style>
    .lg_circle:before {
        content: "";
        display: inline-block;
        width: 10px;
        height: 10px;
        margin-right: 5px;
        border: 2px solid #d80546;
        border-radius: 50%;
    }
</style>
<style>

    #lg_chamber_graph {
        margin: 2em;
        color: black;
        font-weight: bold;
    }

</style>

<!--lg_model_graph css-->
<style>
    #lg_model_graph {
        display: flex;
        flex-direction: column;
        width: 100%;
    }

    #model_chart_div {
        min-height: 450px;
        display: flex;
        background-color: black;
        padding: 0.8em;
        margin: 0.5em;
        color: white;
        font-family: "Adobe 명조 Std M";
    }

    #model_chart_div div > div > div > svg {
        width: 100%;
    }

    #lg_graph {
        display: flex;
        flex-direction: row;
        width: 100%;
    }

    #lg_graph1 {
        display: flex;
        flex-direction: column;
        width: 100%;
    }

    #lg_graph2 {
        display: flex;
        flex-direction: column;
        width: 100%;
    }

    .chart {
        width: 100%;
        min-height: 300px;
    }

    #chart_div1 {
        border: 1px solid #CCC !important;
    }

    #chart_div2 {
        border: 1px solid #CCC !important;
    }

    #chart_div1 div > div > svg > rect {
        border: 1px solid black;
    }

    #chart_div2 rect {
        border-right-color: #CCC !important;
        border-bottom-color: #CCC !important;
        border-left-color: #CCC !important
    }

    .no-padding {
    }

    #index {
        height: 32px;
        padding: 5px 12px;
        font-size: 13px;
        line-height: 1.42857143;
        color: #555;
        background: #fff none;
    }

    #lg_see_graph_btn {
        display: inline-block;
        margin-bottom: 0;
        font-weight: 400;
        vertical-align: top;
        touch-action: manipulation;
        background-color: rgb(105, 109, 114);
        border-width: 1px;
        padding: 6px 12px;
        font-size: 13px;
        color: rgb(223, 223, 225);
        line-height: 1.42857143;
        border-radius: 4px;
        user-select: none;
    }
</style>
</body>